version: 2

models:
  - name: int_installs
    description: "Intermediate table for app installs with attribution data from Adjust"
    columns:
      - name: install_id
        description: "Unique identifier for each install (surrogate key) taking into account user_id, adjust_id, and installed_at"
        data_tests:
          - not_null
          - unique
      - name: justplay_user_id
        description: "Internal JustPlay user identifier"
        data_tests:
          - not_null
      - name: adjust_user_id
        description: "Unique ID generated by Adjust for this install"
        data_tests:
          - not_null
      - name: installed_at
        description: "Timestamp when user installed the app"
        data_tests:
          - not_null
      - name: country_code
        description: "Country code attributed by Adjust for install location"
      - name: os_name
        description: "Operating system platform (iOS or android)"
        data_tests:
          - accepted_values:
              values: ['ios', 'android']
      - name: acquisition_channel
        description: "Marketing channel/ad network that drove the install"
        data_tests:
          - not_null
      - name: campaign_name
        description: "Name of the marketing campaign"
      - name: campaign_creative
        description: "Name of the ad creative"
      - name: ad_group_name
        description: "Ad group name within the campaign"
      - name: tracker_name
        description: "Adjust tracker name/link token"
      - name: device_name
        description: "Device name information"
      - name: os_version
        description: "Operating system version"
      - name: has_limit_ad_tracking
        description: "Whether user has limited ad tracking enabled"
      - name: idfa
        description: "iOS Identifier for Advertisers"
      - name: idfv
        description: "iOS Identifier for Vendors"
      - name: google_ad_id
        description: "Google Advertising ID for Android devices"

  - name: int_revenue
    description: "Intermediate table for revenue events from all monetization sources"
    columns:
      - name: event_id
        description: "Unique identifier for each revenue event"
        data_tests:
          - not_null
          - unique
      - name: justplay_user_id 
        description: "Internal JustPlay user identifier"
        data_tests:
          - not_null
      - name: device_id
        description: "Device identifier associated with the revenue event"
        data_tests:
          - not_null
      - name: advertising_id
        description: "Mobile advertising identifier (IDFA/GAID). Can be null if not available."
      - name: created_at
        description: "Timestamp when revenue event occurred"
        data_tests:
          - not_null
      - name: country_code
        description: "Country code where revenue event occurred"
      - name: os_name
        description: "Operating system platform (iOS or android)"
        data_tests:
          - accepted_values:
              values: ['ios', 'android']
      - name: revenue_usd
        description: "Revenue amount in USD"
        data_tests:
          - not_null
          - outliers_iqr:
                multiplier: 1.5
      - name: revenue_source
        description: "Source of revenue (ads, iap, etc)"
        data_tests:
          - not_null
      - name: ad_network_name
        description: "Name of ad network that generated the revenue"
      - name: ad_unit_format
        description: "Format of the ad unit (banner, interstitial, rewarded)"
      - name: ad_unit_name
        description: "Name/identifier of the specific ad unit"
      - name: package_name
        description: "App package/bundle identifier"

  - name: int_ad_spend
    description: "Intermediate table for ad spend data from marketing campaigns"
    columns:
      - name: ad_spend_id
        description: "Unique identifier for each ad spend record based on date, country, platform, and campaign details"
        data_tests:
          - not_null
          - unique
      - name: report_date
        description: "Date when the ad spend was reported"
        data_tests:
          - not_null
      - name: country_code
        description: "Country code where the ad campaign was running"
        data_tests:
          - not_null
      - name: os_name
        description: "Operating system platform (iOS or android)"
        data_tests:
          - accepted_values:
              values: ['ios', 'android']
      - name: acquisition_channel
        description: "Marketing channel/ad network that drove the spend"
        data_tests:
          - not_null
      - name: campaign_name
        description: "Name of the marketing campaign"
        data_tests:
          - not_null
      - name: campaign_creative
        description: "Name of the ad creative"
        data_tests:
          - not_null
      - name: ad_spend_usd
        description: "Ad spend amount in USD"
        data_tests:
          - not_null
          - outliers_iqr:
                multiplier: 1.5
      - name: network_clicks
        description: "Number of clicks reported by the ad network"
      - name: network_impressions
        description: "Number of impressions reported by the ad network"
      - name: network_installs
        description: "Number of installs reported by the ad network"
      - name: adjust_installs
        description: "Number of installs attributed by Adjust"